{% extends "base.html" %}

{% block title %}Contact Support{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="page-title-box">
                <div class="page-title-right">
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">Dashboard</a></li>
                        <li class="breadcrumb-item active">Contact Support</li>
                    </ol>
                </div>
                <h4 class="page-title">Contact Support</h4>
            </div>
        </div>
    </div>

    <!-- Contact Information -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Send us a Message</h5>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('main.contact') }}" id="contactForm">
                        {{ form.hidden_tag() }}
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    {{ form.name.label(class="form-label") }}
                                    {{ form.name(class="form-control", placeholder="Enter your full name") }}
                                    {% if form.name.errors %}
                                        <div class="invalid-feedback d-block">
                                            {% for error in form.name.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    {{ form.email.label(class="form-label") }}
                                    {{ form.email(class="form-control", placeholder="Enter your email address") }}
                                    {% if form.email.errors %}
                                        <div class="invalid-feedback d-block">
                                            {% for error in form.email.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    {{ form.phone.label(class="form-label") }}
                                    {{ form.phone(class="form-control", placeholder="Enter your phone number") }}
                                    {% if form.phone.errors %}
                                        <div class="invalid-feedback d-block">
                                            {% for error in form.phone.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    {{ form.subject.label(class="form-label") }}
                                    {{ form.subject(class="form-select") }}
                                    {% if form.subject.errors %}
                                        <div class="invalid-feedback d-block">
                                            {% for error in form.subject.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form.message.label(class="form-label") }}
                            {{ form.message(class="form-control", rows="5", placeholder="Describe your issue or question in detail...") }}
                            {% if form.message.errors %}
                                <div class="invalid-feedback d-block">
                                    {% for error in form.message.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                {{ form.urgent(class="form-check-input") }}
                                <label class="form-check-label" for="{{ form.urgent.id }}">
                                    This is an urgent issue that needs immediate attention
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                {{ form.include_screenshot(class="form-check-input") }}
                                <label class="form-check-label" for="{{ form.include_screenshot.id }}">
                                    Include screenshot or file attachment
                                </label>
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-send me-2"></i>Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="col-lg-4">
            <!-- Support Hours -->
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Support Hours</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-clock fs-4 me-3 text-primary"></i>
                        <div>
                            <h6 class="mb-1">Business Hours</h6>
                            <p class="mb-0 text-muted">Monday - Friday: 9:00 AM - 6:00 PM</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-clock-history fs-4 me-3 text-success"></i>
                        <div>
                            <h6 class="mb-1">Extended Support</h6>
                            <p class="mb-0 text-muted">Saturday: 10:00 AM - 4:00 PM</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-globe fs-4 me-3 text-info"></i>
                        <div>
                            <h6 class="mb-1">Time Zone</h6>
                            <p class="mb-0 text-muted">UTC +5:30 (IST)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Methods -->
            <div class="card mt-3">
                <div class="card-header">
                    <h5 class="card-title mb-0">Contact Methods</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="mailto:support@saaserp.com" class="btn btn-outline-primary">
                            <i class="bi bi-envelope me-2"></i>Email Support
                        </a>
                        <a href="tel:+91-1234567890" class="btn btn-outline-success">
                            <i class="bi bi-telephone me-2"></i>Call Support
                        </a>
                        <a href="#" class="btn btn-outline-info" onclick="openLiveChat()">
                            <i class="bi bi-chat-dots me-2"></i>Live Chat
                        </a>
                    </div>
                </div>
            </div>

            <!-- Response Time -->
            <div class="card mt-3">
                <div class="card-header">
                    <h5 class="card-title mb-0">Response Time</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6">
                            <div class="mb-3">
                                <h4 class="text-success">2-4 hours</h4>
                                <small class="text-muted">Urgent Issues</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="mb-3">
                                <h4 class="text-primary">24 hours</h4>
                                <small class="text-muted">General Support</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Frequently Asked Questions</h5>
                </div>
                <div class="card-body">
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    How do I reset my password?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To reset your password:</p>
                                    <ol>
                                        <li>Go to the login page</li>
                                        <li>Click "Forgot Password"</li>
                                        <li>Enter your email address</li>
                                        <li>Check your email for reset instructions</li>
                                        <li>Follow the link to create a new password</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    How can I upgrade my subscription plan?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To upgrade your subscription:</p>
                                    <ol>
                                        <li>Go to <strong>Billing → Subscription</strong></li>
                                        <li>Click "Upgrade Plan"</li>
                                        <li>Choose your new plan</li>
                                        <li>Review pricing and features</li>
                                        <li>Complete the payment process</li>
                                    </ol>
                                    <div class="alert alert-info mt-3">
                                        <i class="bi bi-info-circle me-2"></i>
                                        Your new plan will be activated immediately after payment.
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    How do I add new users to my organization?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To add new users:</p>
                                    <ol>
                                        <li>Go to <strong>Admin → Users</strong></li>
                                        <li>Click "Add User"</li>
                                        <li>Fill in the user's information</li>
                                        <li>Assign appropriate role and permissions</li>
                                        <li>Send invitation email</li>
                                    </ol>
                                    <p class="mt-3">The user will receive an email invitation to join your organization.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    What payment methods do you accept?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>We accept the following payment methods:</p>
                                    <ul>
                                        <li><strong>Credit/Debit Cards:</strong> Visa, MasterCard, American Express</li>
                                        <li><strong>Digital Wallets:</strong> PayPal, Apple Pay, Google Pay</li>
                                        <li><strong>Bank Transfers:</strong> ACH, SEPA, Wire transfers</li>
                                        <li><strong>Local Payment Methods:</strong> Based on your region</li>
                                    </ul>
                                    <div class="alert alert-success mt-3">
                                        <i class="bi bi-shield-check me-2"></i>
                                        All payments are processed securely with industry-standard encryption.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Team -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Our Support Team</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="text-center">
                                <div class="avatar-lg mx-auto mb-3">
                                    <div class="avatar-title rounded-circle bg-primary" style="width: 80px; height: 80px; line-height: 80px; font-size: 2rem;">
                                        <i class="bi bi-person"></i>
                                    </div>
                                </div>
                                <h6>Technical Support</h6>
                                <p class="text-muted">Expert assistance with technical issues</p>
                                <small class="text-muted">Response: 2-4 hours</small>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="text-center">
                                <div class="avatar-lg mx-auto mb-3">
                                    <div class="avatar-title rounded-circle bg-success" style="width: 80px; height: 80px; line-height: 80px; font-size: 2rem;">
                                        <i class="bi bi-people"></i>
                                    </div>
                                </div>
                                <h6>Account Management</h6>
                                <p class="text-muted">Help with billing and account setup</p>
                                <small class="text-muted">Response: 4-8 hours</small>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="text-center">
                                <div class="avatar-lg mx-auto mb-3">
                                    <div class="avatar-title rounded-circle bg-warning" style="width: 80px; height: 80px; line-height: 80px; font-size: 2rem;">
                                        <i class="bi bi-graph-up"></i>
                                    </div>
                                </div>
                                <h6>Sales Support</h6>
                                <p class="text-muted">Questions about features and pricing</p>
                                <small class="text-muted">Response: 24 hours</small>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="text-center">
                                <div class="avatar-lg mx-auto mb-3">
                                    <div class="avatar-title rounded-circle bg-info" style="width: 80px; height: 80px; line-height: 80px; font-size: 2rem;">
                                        <i class="bi bi-book"></i>
                                    </div>
                                </div>
                                <h6>Training & Onboarding</h6>
                                <p class="text-muted">Help with platform adoption</p>
                                <small class="text-muted">Response: 24-48 hours</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function openLiveChat() {
    // Implement live chat functionality
    alert('Opening live chat...');
}

// Form validation
document.getElementById('contactForm').addEventListener('submit', function(e) {
    const urgent = document.getElementById('{{ form.urgent.id }}').checked;
    const message = document.getElementById('{{ form.message.id }}').value;
    
    if (urgent && message.length < 50) {
        e.preventDefault();
        alert('For urgent issues, please provide a detailed description (at least 50 characters).');
        return false;
    }
});

// Auto-resize textarea
document.getElementById('{{ form.message.id }}').addEventListener('input', function() {
    this.style.height = 'auto';
    this.style.height = (this.scrollHeight) + 'px';
});
</script>

<style>
.avatar-lg {
    display: inline-block;
}

.accordion-button:not(.collapsed) {
    background-color: rgba(102, 126, 234, 0.1);
    color: #667eea;
}

.accordion-button:focus {
    box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
}
</style>
{% endblock %}
